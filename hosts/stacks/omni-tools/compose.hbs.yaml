services:
  omni-tools:
    image: iib0011/omni-tools:0.6.0@sha256:ceb5acc317daf387634f7f212cefe4722fd1243ad1cba74203f25254195b6c69
    container_name: omni-tools
    restart: unless-stopped
    # ports:
    #   - "8080:80"
    labels:
      - traefik.enable=true
      - traefik.http.routers.omnitools.rule=Host(`{{{domainForApp "omni-tools"}}}`)
      - traefik.http.routers.omnitools.entrypoints=https
      - traefik.http.routers.omnitools.tls=true
      - traefik.http.routers.omnitools.tls.certresolver=porkbun
      - traefik.http.routers.omnitools.service=omnitools
      - traefik.http.services.omnitools.loadbalancer.server.port=80
      - traefik.http.routers.omnitools.middlewares=oidc-auth@file
    networks:
      - traefik

networks:
  traefik:
    external: true
