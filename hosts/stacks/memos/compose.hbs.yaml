services:
  memos:
    image: neosmemo/memos:0.26.0@sha256:e1eceadcb440fd90c2b1ce1748957b17168c01dacdd091584a480dec09863516
    container_name: memos
    # ports:
    #   - "5230:5230"
    volumes:
      - /docker/memos:/var/opt/memos
    environment:
      - MEMOS_MODE=prod
      - MEMOS_PORT=5230
    restart: unless-stopped
    labels:
      - traefik.enable=true
      - traefik.http.routers.memos.rule=Host(`{{{domainForApp "memos"}}}`)
      - traefik.http.routers.memos.entrypoints=https
      - traefik.http.routers.memos.tls=true
      - traefik.http.routers.memos.tls.certresolver=porkbun
      - traefik.http.routers.memos.service=memos
      - traefik.http.services.memos.loadbalancer.server.port=5230
    networks:
      - traefik

networks:
  traefik:
    external: true
